@page
@model TestModel
@{
    ViewData["Title"] = "Test Page";
}
<div class="row">
    <div class="col-lg-12">
        <div class="bs-component">
            <form>
                <fieldset>
                    <legend>Job Details</legend>
                    <div class="form-group">
                        <label for="exampleTextarea" class="form-label mt-4">Job Title</label>
                        <textarea class="form-control" id="jobtitle" rows="3"></textarea>
                    </div>
                    <button type="button" class="btn btn-primary" onclick="copy()">Copy</button>
                </fieldset>
            </form>
        </div>
    </div>
</div>
@section Scripts {
    <script type="text/javascript">
        function copy() {
            /* Get the text field */
            var copyText = document.getElementById("jobtitle");

            /* Select the text field */
            copyText.select();
            copyText.setSelectionRange(0, 99999); /* For mobile devices */

            /* Copy the text inside the text field */
            navigator.clipboard.writeText(copyText.value); 
        }

        $(function () {
            const jobtitle = document.getElementById('jobtitle');

            const inputHandler = function (e) {
                let val = jobtitle.value.toUpperCase();

                const xs = ["CONCENTRIX", "CNXC", "CNX"];
                for (let x of xs)
                {
                    val = val.replaceAll(x, ' ');
                }
                val = val.replaceAll('  ', ' ');
                val = val.trim();

                jobtitle.value = val;
            }

            jobtitle.addEventListener('input', inputHandler);
            jobtitle.addEventListener('propertychange', inputHandler);
        });
    </script>
}